# Создание рабочей копии

Как правило, работа с хранилищем Subversion начинается с создания рабочей копии проекта. При создании рабочей копии на локальной машине создается копия хранилища. Эта копия содержит HEAD (последнюю правку) хранилища, указанного вами в командной строке:

```bash
$ svn checkout http://svn.collab.net/repos/svn/trunk
A  trunk/subversion.dsw
A  trunk/svn_check.dsp
A  trunk/COMMITTERS
A  trunk/configure.in
A  trunk/IDEAS
…
Checked out revision 2499.
```

> Subversion очень старается не ограничивать количество типов данных, которые можно поместить под контроль системы. Содержимое файлов и значения свойств хранятся и передаются в бинарном формате. О том, как объяснить Subversion, что для отдельного файла «текстовые» операции не имеют смысла, вы узнаете в разделе «[Тип содержимого файла](//todo)». Однако есть ситуации, когда Subversion накладывает некоторые ограничения на хранимую информацию.
>
> Внутри Subversion определенная информация — например, имена свойств, пути и лог-сообщения — обрабатывается как текст в кодировке UTF-8. Однако это вовсе не означает обязательного использования UTF-8 при работе с Subversion. В случае если преобразования между UTF-8 и локальной кодировкой на компьютере могут быть выполнены (что справедливо для большинства испульзуемых сегодня кодировок), как правило, Subversion-клиент выполняет эти преобразования легко и прозрачно для пользователя.
>
> Кроме того, имена путей при WebDAV-транзакциях используются как значения XML-атрибутов, так же как и в некоторых собственных файлах Subversion. Это означает, что при указании путей могут использоваться только корректные для XML (1.0) символы. Также при указании путей Subversion запрещает использовать символы TAB, CR и LF, чтобы они не повреждали файлы различий и не искажали вывод таких команд как [`svn log`](//todo) или [`svn status`](//todo).
>
> Вам может показаться, что нужно помнить очень много всего, однако на практике эти ограничения не вызывают сложностей. Если ваши локальные установки совместимы с UTF-8 и вы не используете специальных символов при указании путей, то проблем при работе с Subversion у вас не возникнет. Клиент для командной строки немного в этом помогает — он автоматически корректирует недопустимые символы, встречающиеся в набранных URL, «юридически правильными» версиями для внутреннего использования.
>
> Кроме этого, опытные пользователи Subversion разработали набор правил хорошего тона для организации структуры хранилища. Хотя эти правила и не являются такими же строгими требованиями, как описанный выше синтаксис, они помогают при выполнении типовых задач. Используемая по тексту книги часть пути /trunk является одним из таких правил; подробнее об этой и других подобных рекомендациях мы поговорим в [Глава 4, Ветвление и слияние](//todo).

Хотя в приведенном примере рабочая копия создается на основе корневого каталога, вы можете легко создать рабочую копию на основе подкаталога любой степени вложенности, указав при создании рабочей копии подкаталог в URL:

```bash
$ svn checkout http://svn.collab.net/repos/svn/trunk/doc/book/tools
A  tools/readme-dblite.html
A  tools/fo-stylesheet.xsl
A  tools/svnbook.el
A  tools/dtd
A  tools/dtd/dblite.dtd
…
Checked out revision 2499.
```

Так как Subversion использует модель «копирование-изменение-слияние» вместо модели «блокирование-изменение-разблокирование» (см. [Глава I, Фундаментальные понятия](ba)), вы уже можете начинать вносить изменения в файлы и каталоги своей рабочей копии. Ваша рабочая копия ничем не отличается от любого другого набора файлов в вашей системе. Вы можете редактировать и менять их, перемещать, вы даже можете полностью удалить рабочую копию и забыть о ней.

> ![Примечание](images/note.png)
> Несмотря на то, что рабочая копия выглядит «как и любой другой набор файлов в вашей системе», необходимо ставить Subversion в известность в том случае, если вы собираетесь что-либо реорганизовывать в рабочей копии. Если вы хотите скопировать или переместить элемент в рабочей копии, вы должны использовать команду svn copy или svn move вместо аналогичных команд операционной системы. Мы еще обсудим их в этой главе более подробно.

Исключение составляют случаи, когда вы готовы зафиксировать новый файл или каталог, либо внести изменения в один из существующих файлов или каталогов. Эти операции не требуют дополнительного уведомления сервера Subversion.

> ###А как насчет каталога .svn?
>
> Каждый каталог в рабочей копии содержит служебную область — подкаталог с названием .svn. Обычно команды, используемые для вывода содержимого каталогов, не показывают этот подкаталог, но тем не менее, он играет очень важную роль. Что бы вы ни делали, не удаляйте и не меняйте ничего в служебной области! Subversion использует ее при управлении рабочей копией.

Хотя вы, конечно, можете создать рабочую копию, указав в качестве единственного аргумента URL хранилища, вы можете также указать после него каталог. Тогда ваша рабочая копия будет находиться в новом каталоге с указанным вами именем. Например:

```bash
$ svn checkout http://svn.collab.net/repos/svn/trunk subv
A  subv/subversion.dsw
A  subv/svn_check.dsp
A  subv/COMMITTERS
A  subv/configure.in
A  subv/IDEAS
…
Checked out revision 2499.
```

Эта команда создаст рабочую копию в каталоге с именем subv, вместо каталога trunk как мы делали раньше.
